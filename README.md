# repost-bot-public
Бот автоматически переносит посты из ваших Telegram-каналов в каналы мессенджера МАКС.
TG-MAX | Repost Bot https://t.me/tgmaxrepostbot
## Быстрые ссылки

| Что | Куда |
|-----|------|
| Открыть бота | Администратор выдаёт ссылку на бота |
| Получить MAX API токен | [dev.max.ru](https://dev.max.ru) → API → регистрация приложения |
| Узнать свой Telegram ID | [@userinfobot](https://t.me/userinfobot) |
| Поддержка | [@standartsupbot](https://t.me/standartsupbot?start=source_TG-MAX%20Repost%20Bot) |

---

## Шаг 1. Запустить бота

1. Откройте бота в Telegram (ссылку даёт администратор)
2. Нажмите **Запустить** или отправьте `/start`
3. Прочитайте приветствие

---

## Шаг 2. Указать MAX API токен

Токен нужен, чтобы бот мог отправлять посты в МАКС от вашего имени.

1. Зайдите на [dev.max.ru](https://dev.max.ru), войдите в аккаунт МАКС
2. Зарегистрируйте приложение или откройте существующее → скопируйте токен API
3. В боте отправьте `/setup`
4. По запросу бота отправьте токен одним сообщением
5. Должно появиться: **«Токен сохранён»**

---

## Шаг 3. Добавить каналы

Один Telegram-канал = один канал в МАКС.

### Добавить бота в свой Telegram-канал

1. Откройте канал → **Настройки** → **Администраторы** → **Добавить администратора**
2. Найдите бота по username и добавьте
3. Выдайте право **публиковать сообщения**

### Добавить пару каналов в боте

1. Отправьте `/add_channel`
2. Введите **ID или @username Telegram-канала**:
   - числовой ID: `-1001234567890` — для приватного канала
   - или @username: `@my_channel`
3. Выберите канал МАКС из списка кнопок

Лимит: **10 каналов** на пользователя. Один TG-канал может быть привязан только к одному пользователю.

---

## Шаг 4. Репостинг

После настройки:

1. Публикуйте посты в Telegram-канале, где бот — администратор
2. Бот автоматически отправляет их в соответствующий канал МАКС
3. Поддерживаются: текст, фото, видео, документы, аудио, альбомы

---

## Команды и кнопки

| Действие | Команда или кнопка |
|----------|--------------------|
| Запуск / инструкция | `/start` |
| Указать MAX токен | `/setup` |
| Добавить канал | `/add_channel` |
| Удалить канал | `/remove_channel` |
| Статус каналов | `Статус` или `/status` |
| Управление каналами | `Каналы` или `/channels` |
| Архивный постинг | `Архивный постинг` (если есть в меню) |
| Настройки | `Настройки` |
| Поддержка | `Поддержка` |

**Архивный постинг** (выгрузка старых постов по периоду) **доступен только при авторизации** — либо на сервере настроена общая сессия, либо вы подключаете свой Telegram для архива. Без этого при загрузке архива будет ошибка: Выгрузка архива для этого канала недоступна: нужна авторизация Telegram для архива. Подключите свой Telegram в Настройках (если доступно) или обратитесь в поддержку. Репост новых постов работает без этого.

Репост новых постов работает всегда.

---

## Управление репостом и привязкой МАКС

Нажмите **Каналы** или отправьте `/channels`:

- У **привязанного** канала:
  - **Репост вкл №i** / **Репост выкл №i** — включить или выключить репост
  - **Отвязать МАКС №i** — отвязать канал МАКС
- У **отвязанного** канала:
  - **Привязать МАКС №i** — выбрать канал МАКС для репоста

Без привязки и с выключенным репостом посты не репостятся.

---

## Ошибки

При сбоях (неверный токен, ошибка API, лимиты) бот отправляет уведомление в личные сообщения.

**«chat.not.found» (404):** МАКС не видит канал. Проверьте:
- канал создан в МАКС;
- бот/приложение добавлены в канал;
- `chat_id` введён правильно.

Список доступных чатов: попросите администратора выполнить `python3 scripts/list_max_chats.py` с вашим токеном.

---

## Поддержка

Вопросы и проблемы — в [@standartsupbot](https://t.me/standartsupbot?start=source_TG-MAX%20Repost%20Bot).
